## REVIEWS

### Get all Reviews by a Coffee's id

Returns all the reviews that belong to a coffee specified by id.

* Require Authentication: false
* Request
  * Method: GET
  * Route path: /api/coffees/:coffeeId/reviews
  * Body: none

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "Reviews": [
        {
          "id": 1,
          "userId": 1,
          "coffeeId": 1,
          "review": "This was an awesome coffee",
          "stars": 5,
          "createdAt": "2021-11-19 20:39:36",
          "updatedAt": "2021-11-19 20:39:36" ,
          "User": {
            "id": 1,
            "username": "Demo",
          },
        }
      ]
    }
    ```

* Error response: Couldn't find a coffee with the specified id
  * Status Code: 404
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Coffee couldn't be found"
    }
    ```

### Create a Review for a Coffee based on the coffee's id

Create and return a new review for a coffee specified by id.

* Require Authentication: true
* Request
  * Method: POST
  * Route path: /api/coffees/:coffeeId/reviews
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "review": "This was an awesome coffee!",
      "stars": 5,
    }
    ```

* Successful Response
  * Status Code: 201
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "id": 1,
      "userId": 1,
      "coffeeId": 1,
      "review": "This was an awesome coffee!",
      "stars": 5,
      "createdAt": "2021-11-19 20:39:36",
      "updatedAt": "2021-11-19 20:39:36"
    }
    ```

* Error Response: Body validation errors
  * Status Code: 400
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Bad Request", // (or "Validation error" if generated by Sequelize),
      "errors": {
        "review": "Review text is required",
        "stars": "Stars must be an integer from 1 to 5",
      }
    }
    ```

* Error response: Couldn't find a Coffee with the specified id
  * Status Code: 404
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Coffee couldn't be found"
    }
    ```


* Error response: Review from the current user already exists for the Coffee 
  * Status Code: 500
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "User already has a review for this coffee"
    }
    ```


### Delete a Review

Delete an existing review.

* Require Authentication: true
* Require proper authorization: Review must belong to the current user
* Request
  * Method: DELETE
  * Route path: /api/reviews/:reviewId
  * Body: none

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Successfully deleted"
    }
    ```

* Error response: Couldn't find a Review with the specified id
  * Status Code: 404
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Review couldn't be found"
    }
    ```



## Favorites

### Get all favorites of a user
Returns all the favorites of the current user

* Required Authentication: True
* Request
  * Method: Get
  * URL: /api/favorites
  * Body: none

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
        "Favorites": [
            {
                "id": 1,
                "user_id": 1,
                "coffee_id": 1,
            },
            {
                "id": 2,
                "user_id": 2,
                "coffee_id": 2,
            }
        ]
    }
    ```


### Add an item to favorites

add an item to favorites page

* Require Authentication: True
* Request
  * Method: POST
  * URL: /api/favorites
  * Body:

    ```json
    {
        "user_id": 1,
        "product_id": 1
    }
    ```
* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "id": 1,
      "user_id": 1,
      "product_id": 1
    }
    ```

### Delete one from favorites

Deletes a favorite from favorites.

* Require Authentication: true
* Require proper authorization: Favorite must belong to the current user
* Request
  * Method: DELETE
  * URL: /api/favorites
  * Body: none

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Successfully deleted"
    }
    ```

## Coffee images

### Add image

add an image to a coffee product

* Require Authentication: True
* Require proper authorization: Coffee product must belong to the current user
* Request
  * Method: POST
  * URL: /api/coffee_images
  * Body:

    ```json
    {
        "coffee_id": 1,
        "url": "www.example.com"
    }
    ```
* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "id": 1,
      "coffee_id": 1,
      "url": "www.example.com"
    }
    ```
### Get coffee image

Returns the images of the current coffee product.

* Require Authentication: true
* Request
  * Method: GET
  * URL: /api/coffee_images
  * Body: none

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "id": 1,
      "coffee_id": 1,
      "url": "www.example.com"
    }
    ```
### Delete image

Deletes an existing image.

* Require Authentication: true
* Require proper authorization: review image must belong to the current user
* Request
  * Method: DELETE
  * URL: /api/coffee_images
  * Body: none

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Successfully deleted"
    }
    ```

## Cart
### Get the current user's Cart Items

Return all the items in current user's cart.
* Require Authentication: true
* Request
  * Method: GET
  * URL: /api/cart/current
  * Body: none

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "cartId": 1,
      "userId": 1,
      "CartItems": [
        {
          "id": 1,
          "Coffee": {
            "coffeeId": 1,
            "name": "ritual coffee",
            "price": 10.99,
            "roast": "expresso",
            "region": "Hawaii"
          },
          "quantity": 1000
        }
      ],
      "totalAmount": 10990
    }
    ```

### Create a cart for current user

Create a pending cart for current user
* Require Authentication: true
* Request
  * Method: POST
  * URL: /api/cart/current
  * Body: 

    ```json
    {

    }
    ```

* Successful Response
  * Status Code: 201
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "id": 1,
      "userId": 1,
      "pending": True
    }
    ```

### Submit a cart for current user

Submit a pending cart for current user
* Require Authentication: true
* Request
  * Method: UPDATE
  * URL: /api/cart/current
  * Body: 

    ```json
    {}
    ```

* Successful Response
  * Status Code: 201
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "id": 1,
      "userId": 1,
      "pending": False
    }
    ```

## Cart Items
### Add cart items

Add a cart item to a pending cart
* Require Authentication: true
* Require proper authorization: cart items must not belong to current user

* Request
  * Method: POST
  * URL: /api/cart/:cartId
  * Body: 

    ```json
    {
      "coffeeId": 1,
      "quantity": 1
    }
    ```

* Successful Response
  * Status Code: 201
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "id": 1,
      "coffeeId": 1,
      "cartId": 1,
      "quantity": 1
    }
    ```

* Error response: Couldn't find a Coffee with the specified id
  * Status Code: 404
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Coffee couldn't be found"
    }
    ```

* Error response: Couldn't find a Cart with the specified id
  * Status Code: 404
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Cart couldn't be found"
    }
    ```

* Error response: Cannot add any more cart items because there is a maximum of 99 items per cart
  * Status Code: 403
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Maximum number of cart items was reached"
    }
    ```

### Delete cart items

Delete a cart item to a pending cart
* Require Authentication: true
* Request
  * Method: DELETE
  * URL: /api/cartItems/:cartItemsId
  * Body: none

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Successfully deleted"
    }
    ```

* Error response: Couldn't find a CartItem with the specified id
  * Status Code: 404
  * Headers:
    * Content-Type: application/json
  * Body: 

    ```json
    {
      "message": "CartItems couldn't be found"
    }
    ```

### Update cart item

Change the number cart item to a pending cart
* Require Authentication: true

* Request
  * Method: PUT
  * URL: /api/cartItems/:cartItemsId
  * Body: 

    ```json
    {
      "quantity": 10
    }
    ```

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "id": 1,
      "coffeeId": 1,
      "cartId": 1,
      "quantity": 10
    }
    ```

* Error Response: Body validation errors
  * Status Code: 400
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Bad Request", // (or "Validation error" if generated by Sequelize),
      "errors": {
        "quantity": "quantity must be an integer within 1 and 99"
      }
    }
    ```

* Error response: Couldn't find a cart item with the specified id
  * Status Code: 404
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Cart item couldn't be found"
    }
    ```