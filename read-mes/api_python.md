## REVIEWS

### Get all Reviews by a Coffee's id

Returns all the reviews that belong to a coffee specified by id.

* Require Authentication: false
* Request
  * Method: GET
  * Route path: /api/coffees/:coffeeId/reviews
  * Body: none

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "Reviews": [
        {
          "id": 1,
          "userId": 1,
          "coffeeId": 1,
          "review": "This was an awesome coffee",
          "stars": 5,
          "createdAt": "2021-11-19 20:39:36",
          "updatedAt": "2021-11-19 20:39:36" ,
          "User": {
            "id": 1,
            "username": "Demo",
          },
        }
      ]
    }
    ```

* Error response: Couldn't find a coffee with the specified id
  * Status Code: 404
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Coffee couldn't be found"
    }
    ```

### Create a Review for a Coffee based on the coffee's id

Create and return a new review for a coffee specified by id.

* Require Authentication: true
* Request
  * Method: POST
  * Route path: /api/coffees/:coffeeId/reviews
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "review": "This was an awesome coffee!",
      "stars": 5,
    }
    ```

* Successful Response
  * Status Code: 201
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "id": 1,
      "userId": 1,
      "coffeeId": 1,
      "review": "This was an awesome coffee!",
      "stars": 5,
      "createdAt": "2021-11-19 20:39:36",
      "updatedAt": "2021-11-19 20:39:36"
    }
    ```

* Error Response: Body validation errors
  * Status Code: 400
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Bad Request", // (or "Validation error" if generated by Sequelize),
      "errors": {
        "review": "Review text is required",
        "stars": "Stars must be an integer from 1 to 5",
      }
    }
    ```

* Error response: Couldn't find a Coffee with the specified id
  * Status Code: 404
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Coffee couldn't be found"
    }
    ```


* Error response: Review from the current user already exists for the Coffee 
  * Status Code: 500
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "User already has a review for this coffee"
    }
    ```


### Delete a Review

Delete an existing review.

* Require Authentication: true
* Require proper authorization: Review must belong to the current user
* Request
  * Method: DELETE
  * Route path: /api/reviews/:reviewId
  * Body: none

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Successfully deleted"
    }
    ```

* Error response: Couldn't find a Review with the specified id
  * Status Code: 404
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Review couldn't be found"
    }
    ```



## favorites

### get all favorites of a user
Returns all the favorites of the current user

* Required Authentication: True
* Request
  * Method: Get
  * URL: /api/favorites
  * Body: none

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
        "Favorites": [
            {
                "id": 1,
                "user_id": 1,
                "coffee_id": 1,
            },
            {
                "id": 2,
                "user_id": 2,
                "coffee_id": 2,
            }
        ]
    }
    ```


### add an item to favorites

add an item to favorites page

* Require Authentication: True
* Request
  * Method: POST
  * URL: /api/favorites
  * Body:

    ```json
    {
        "user_id": 1,
        "product_id": 1
    }
    ```
* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "id": 1,
      "user_id": 1,
      "product_id": 1
    }
    ```

### delete one from favorites

Deletes a favorite from favorites.

* Require Authentication: true
* Require proper authorization: Favorite must belong to the current user
* Request
  * Method: DELETE
  * URL: /api/favorites
  * Body: none

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Successfully deleted"
    }
    ```

## coffee images

### add image

add an image to a coffee product

* Require Authentication: True
* Require proper authorization: Coffee product must belong to the current user
* Request
  * Method: POST
  * URL: /api/coffee_images
  * Body:

    ```json
    {
        "coffee_id": 1,
        "url": "www.example.com"
    }
    ```
* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "id": 1,
      "coffee_id": 1,
      "url": "www.example.com"
    }
    ```
### get coffee image

Returns the images of the current coffee product.

* Require Authentication: true
* Request
  * Method: GET
  * URL: /api/coffee_images
  * Body: none

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "id": 1,
      "coffee_id": 1,
      "url": "www.example.com"
    }
    ```
### delete image

Deletes an existing image.

* Require Authentication: true
* Require proper authorization: review image must belong to the current user
* Request
  * Method: DELETE
  * URL: /api/coffee_images
  * Body: none

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Successfully deleted"
    }
    ```
